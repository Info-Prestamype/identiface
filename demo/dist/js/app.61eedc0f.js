(function(e){function t(t){for(var n,o,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},i={app:0},a=[];function o(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"79baed46"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=i[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=n);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=o(e);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(d);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,r[1](u)}i[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),i=r.n(n);i.a},"04e7":function(e,t,r){},"1e96":function(e,t,r){},"1f9c":function(e,t,r){r("b0c0");r("63b8");e.exports=function(e,t){var r,n=2===arguments.length,i={video:!0,audio:!0},a="PermissionDeniedError",o="PERMISSION_DENIED",s="ConstraintNotSatisfiedError";if(n||(t=e,e=i),!e.audio&&!e.video)return r=new Error("MediaStreamError"),r.name="NoMediaRequestedError",setTimeout((function(){t(r)}),0);navigator.mediaDevices.getUserMedia(e).then((function(e){t(null,e)})).catch((function(e){var r;"string"===typeof e?(r=new Error("MediaStreamError"),r.name=e===a||e===o?a:s):(r=e,r.name||(r[a]?e.name=a:e.name=s)),t(r)}))}},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],o=(r("034f"),r("2877")),s={},c=Object(o["a"])(s,i,a,!1,null,null,null),u=c.exports,d=(r("d3b7"),r("8c4f")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("HelloWorld",{attrs:{msg:"Prestamype WebCam"}})],1)},f=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[e.initCamera?[r("WebCam",{ref:"webcam",attrs:{awsUrl:"https://api.dev.prestamype.com/v1/prestajapi/post_upload_file_s3","device-id":e.deviceId,width:"100%",resolution:{width:1280,height:720}},on:{started:e.onStarted,stopped:e.onStopped,error:e.onError,cameras:e.onCameras,"camera-change":e.onCameraChange}}),r("button",{on:{click:e.Start}},[e._v("Iniciar")]),r("button",{on:{click:e.Stop}},[e._v("Parar")]),r("button",{on:{click:e.Capture}},[e._v("Foto")])]:e._e()],2)},h=[],m=(r("7db0"),r("fb6a"),r("4f96")),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"identify"},[e.notSupported?[r("label",{staticClass:"inputContent",class:{error:""!==e.errorMessage},attrs:{id:"identify__content"}},[r("input",{staticClass:"inputfile",attrs:{type:"file",id:"identify__input",accept:"image/jpeg"},on:{change:function(t){return e.validateFile(t)}}}),r("span",{staticClass:"inputcustom",attrs:{id:"identify__inputcustom"}},[e._t("identify__inputcustom")],2)])]:[r("video",{ref:"video",staticClass:"identify__webcamera",class:{error:""!==e.errorMessage},attrs:{width:e.width,height:e.height,src:e.source,autoplay:e.autoplay,playsinline:""}})],e.errorMessage?r("p",{staticClass:"errorMessage"},[e._v(" "+e._s(this.errorMessage)+" ")]):e._e()],2)},g=[],b=(r("4160"),r("b0c0"),r("a9e3"),r("159b"),r("c1c3"),r("1da1")),w=r("7338"),y=r.n(w),C=r("1f9c"),_=r.n(C),S={name:"VueWebCam",props:{awsUrl:{type:String,required:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:500},autoplay:{type:Boolean,default:!0},screenshotFormat:{type:String,default:"image/jpeg"},selectFirstDevice:{type:Boolean,default:!1},deviceId:{type:String,default:null},resolution:{type:Object,default:null,validator:function(e){return e.height&&e.width}}},data:function(){return{source:null,notSupported:!1,canvas:null,errorMessage:"",camerasListEmitted:!1,cameras:[]}},watch:{deviceId:function(e){this.changeCamera(e)}},mounted:function(){this.setupMedia()},beforeDestroy:function(){this.stop()},methods:{validateFile:function(e){this.errorMessage="";var t=e.target.files[0].type;"image/jpeg"===t||(this.errorMessage="Only jpg/jpeg and png files are allowed!")},setupMedia:function(){this.loadCameras()},loadCameras:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=0;r!==t.length;++r){var n=t[r];"videoinput"===n.kind&&e.cameras.push(n)}})).then((function(){e.camerasListEmitted||(e.selectFirstDevice&&e.cameras.length>0&&(e.deviceId=e.cameras[0].deviceId),e.$emit("cameras",e.cameras),e.camerasListEmitted=!0)})).catch((function(t){e.notSupported=!0,e.$emit("notsupported",t)}))}catch(r){e.notSupported=!0,e.$emit("notsupported",r)}case 1:case"end":return t.stop()}}),t)})))()},changeCamera:function(e){this.stop(),this.$emit("camera-change",e),this.loadCamera(e)},loadSrcStream:function(e){var t=this;"srcObject"in this.$refs.video?this.$refs.video.srcObject=e:this.source=window.HTMLMediaElement.srcObject(e),this.$refs.video.onloadedmetadata=function(){t.$emit("video-live",e)},this.$emit("started",e)},stopStreamedVideo:function(e){var t=this,r=e.srcObject,n=r.getTracks();n.forEach((function(e){e.stop(),t.$emit("stopped",r),t.$refs.video.srcObject=null,t.source=null}))},stop:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.stopStreamedVideo(this.$refs.video)},start:function(){this.loadCamera(this.deviceId)},pause:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.$refs.video.pause()},resume:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.$refs.video.play()},loadCamera:function(e){var t=this,r={video:{deviceId:{exact:e}}};this.resolution&&(r.video.height=this.resolution.height,r.video.width=this.resolution.width),_()(r,(function(e,r){if(null===e){if(window.ImageCapture){var n=r.getVideoTracks()[0];t.imageCapture=new ImageCapture(n)}t.video=t.$refs.video,t.loadSrcStream(r)}else"NotAllowedError"===e.name?t.errorMessage="please  reload the page and accept the permissions for camera use":(t.notSupported=!0,t.$emit("error",e))}))},capture:function(){this.uploadImage()},uploadImage:function(){return Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("https://api.dev.prestamype.com/v1/prestajapi/post_upload_file_s3");case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))()},getCanvas:function(){var e=this.$refs.video;if(!this.ctx){var t=document.createElement("canvas");t.height=e.videoHeight,t.width=e.videoWidth,this.canvas=t,this.ctx=t.getContext("2d")}var r=this.ctx,n=this.canvas;return r.drawImage(e,0,0,n.width,n.height),n}}},j=S,$=(r("ada9"),Object(o["a"])(j,v,g,!1,null,"5575e538",null)),O=$.exports;function E(e){e.component("vue-web-cam",O)}"undefined"!==typeof window&&window.Vue&&window.Vue.use(E);var I={name:"HelloWorld",props:{msg:String},components:{WebCam:O},data:function(){return{initCamera:!1,img:null,camera:null,deviceId:null,devices:[]}},mounted:function(){this.initCamera=!0},computed:{device:function(){var e=this;return this.devices.find((function(t){return t.deviceId===e.deviceId}))}},watch:{camera:function(e){this.deviceId=e},devices:function(){var e=Object(m["a"])(this.devices),t=e[0];e.slice(1);t&&(this.camera=t.deviceId,this.deviceId=t.deviceId)}},methods:{Capture:function(){this.img=this.$refs.webcam.capture()},onStarted:function(e){},onStopped:function(e){},Stop:function(){this.$refs.webcam.stop()},Start:function(){this.$refs.webcam.start()},onError:function(e){console.log("On Error Event",e)},onCameras:function(e){this.devices=e},onCameraChange:function(e){this.deviceId=e,this.camera=e}}},M=I,x=(r("65ee"),Object(o["a"])(M,p,h,!1,null,"08074f09",null)),k=x.exports,P={name:"home",components:{HelloWorld:k}},D=P,T=Object(o["a"])(D,l,f,!1,null,null,null),W=T.exports;n["a"].use(d["a"]);var N=[{path:"/",name:"home",component:W},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],F=new d["a"]({mode:"history",base:"/",routes:N}),L=F,R=r("2f62");n["a"].use(R["a"]);var V=new R["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:L,store:V,render:function(e){return e(u)}}).$mount("#app")},"65ee":function(e,t,r){"use strict";var n=r("04e7"),i=r.n(n);i.a},"85ec":function(e,t,r){},ada9:function(e,t,r){"use strict";var n=r("1e96"),i=r.n(n);i.a}});
//# sourceMappingURL=app.61eedc0f.js.map