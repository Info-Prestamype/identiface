(function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o=[];function i(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"d3c941e3"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(e);var u=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(d);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,r[1](u)}a[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"1f9c":function(e,t,r){r("b0c0");r("63b8");e.exports=function(e,t){var r,n=2===arguments.length,a={video:!0,audio:!0},o="PermissionDeniedError",i="PERMISSION_DENIED",s="ConstraintNotSatisfiedError";if(n||(t=e,e=a),!e.video)return r=new Error("MediaStreamError"),r.name="NoMediaRequestedError",setTimeout((function(){t(r)}),0);navigator.mediaDevices.getUserMedia(e).then((function(e){t(null,e)})).catch((function(e){var r;"string"===typeof e?(r=new Error("MediaStreamError"),r.name=e===o||e===i?o:s):(r=e,r.name||(r[o]?e.name=o:e.name=s)),t(r)}))}},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],i=(r("034f"),r("2877")),s={},c=Object(i["a"])(s,a,o,!1,null,null,null),u=c.exports,d=(r("d3b7"),r("8c4f")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("HelloWorld",{attrs:{msg:"Prestamype WebCam"}})],1)},f=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[e.initCamera?[r("WebCam",{ref:"webcam",attrs:{awsUrl:"https://api.dev.prestamype.com/v1/prestajapi/post_upload_file_s3",awsConfig:{hola:"Mundo"},"device-id":e.deviceId,isFrontCam:!1,width:"100%",resolution:{width:1280,height:720}},on:{started:e.onStarted,stopped:e.onStopped,error:e.onError,cameras:e.onCameras,"camera-change":e.onCameraChange,"image-ready":e.onImageReady,progress:e.onImageProgress,preview:e.onPreviewImage}}),r("img",{attrs:{src:e.img,alt:""}}),e.notSupport?e._e():[r("button",{on:{click:e.Start}},[e._v("Iniciar")]),r("button",{on:{click:e.Stop}},[e._v("Parar")]),r("button",{on:{click:e.Capture}},[e._v("Foto")])]]:e._e()],2)},m=[],h=(r("7db0"),r("fb6a"),r("4f96")),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"identiface"},[e.notSupported?[r("label",{staticClass:"inputContent",class:{error:""!==e.errorMessage},attrs:{id:"identify__content"}},[r("input",{staticClass:"inputfile",attrs:{type:"file",id:"identify__input",accept:"image/jpeg"},on:{change:function(t){return e.validateFile(t)}}}),r("span",{staticClass:"inputcustom",attrs:{id:"identify__inputcustom"}},[e._t("identify__inputcustom")],2)])]:[r("video",{ref:"video",staticClass:"identify__webcamera",class:{error:""!==e.errorMessage},attrs:{width:e.width,height:e.height,src:e.source,autoplay:e.autoplay,playsinline:""}}),e._v(" "+e._s(e.cameras)+" "),r("hr"),e._v(" "+e._s(e.camsList)+" "),r("hr"),e._v(" "+e._s(e.Constrains)+" "),r("hr")],r("div",{staticClass:"progress"}),e.errorMessage?r("p",{staticClass:"errorMessage"},[e._v(" "+e._s(this.errorMessage)+" ")]):e._e()],2)},g=[],b=(r("a4d3"),r("4de4"),r("4160"),r("c975"),r("b0c0"),r("a9e3"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("c1c3"),r("1da1")),w=r("ade3"),y=r("7338"),C=r.n(y),O=r("1f9c"),j=r.n(O),S=r("db1c"),_=r.n(S);function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){Object(w["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I={name:"identiface",props:{awsUrl:{type:String,required:!0},awsConfig:{type:Object,required:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:500},autoplay:{type:Boolean,default:!0},screenshotFormat:{type:String,default:"image/jpeg"},selectFirstDevice:{type:Boolean,default:!1},deviceId:{type:String,default:null},isFrontCam:{type:Boolean,default:!0},resolution:{type:Object,default:null,validator:function(e){return e.height&&e.width}}},data:function(){return{source:null,notSupported:!1,canvas:null,errorMessage:"",camerasListEmitted:!1,cameras:[],camsList:{back:null,front:null}}},watch:{deviceId:function(e){this.notSupported||this.changeCamera(e)},isFrontCam:function(e,t){e!==t&&this.changeFrontBack(e)}},computed:{supportFacingMode:function(){var e="";return e=navigator.mediaDevices.getSupportedConstraints()["facingMode"]?"Supported!":"Not supported!",e},Constrains:function(){var e=this.isFrontCam?"user":"environment",t=E({},this.deviceId?{deviceId:{exact:this.deviceId}}:{},{facingMode:e});return{video:t}}},mounted:function(){this.setupMedia()},beforeDestroy:function(){this.stop()},methods:{validateFile:function(e){var t=this;this.errorMessage="";var r=e.target.files[0].type;if("image/jpeg"===r){console.log(e.target.files[0]);var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(){t.$emit("preview",n.result)},this.uploadImage(e.target.files[0])}else this.errorMessage="Only jpg/jpeg and png files are allowed!"},setupMedia:function(){this.loadCameras()},isMobile:function(){return"undefined"!==typeof window.orientation},toggleFrontBack:function(){this.isFrontCam=!this.isFrontCam},loadCameras:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=0;r!==t.length;++r){var n=t[r];"videoinput"===n.kind&&(e.cameras.push(n),-1!==n.label.toLowerCase().indexOf("back")&&(e.camsList.back=n),-1!==n.label.toLowerCase().indexOf("front")&&(e.camsList.front=n))}})).then((function(){e.camerasListEmitted||(e.$emit("cameras",e.cameras),e.camerasListEmitted=!0)})).catch((function(t){e.notSupported=!0,e.$emit("notsupported",t)}))}catch(r){e.notSupported=!0,e.$emit("notsupported",r)}case 1:case"end":return t.stop()}}),t)})))()},changeCamera:function(e){this.stop(),this.$emit("camera-change",e),this.deviceId=e,this.loadCamera()},loadSrcStream:function(e){var t=this;"srcObject"in this.$refs.video?this.$refs.video.srcObject=e:this.source=window.HTMLMediaElement.srcObject(e),this.$refs.video.onloadedmetadata=function(){t.$emit("video-live",e)},this.$emit("started",e)},stopStreamedVideo:function(e){var t=this,r=e.srcObject,n=r.getTracks();n.forEach((function(e){e.stop(),t.$emit("stopped",r),t.$refs.video.srcObject=null,t.source=null}))},stop:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.stopStreamedVideo(this.$refs.video)},start:function(){this.loadCamera()},pause:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.$refs.video.pause()},resume:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&this.$refs.video.play()},changeFrontBack:function(e){e&&this.camsList.front&&this.changeCamera(this.camsList.front.deviceId),!e&&this.camsList.back&&this.changeCamera(this.camsList.back.deviceId)},loadCamera:function(){var e=this;j()(this.Constrains,(function(t,r){if(null===t){if(window.ImageCapture){var n=r.getVideoTracks()[0];e.imageCapture=new ImageCapture(n)}e.video=e.$refs.video,e.loadSrcStream(r)}else"NotAllowedError"===t.name?(e.errorMessage="please  reload the page and accept the permissions for camera use",e.$emit("error",t)):(e.notSupported=!0,e.$emit("error",t))}))},capture:function(){this.$emit("preview",this.getCanvas().toDataURL(this.screenshotFormat)),this.uploadImage(_()(this.getCanvas().toDataURL(this.screenshotFormat)))},uploadImage:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,C.a.post(t.awsUrl,t.awsConfig);case 2:return n=r.sent,a=n.data.data.fields,o=n.data.data.url,i=n.data.url,s=new FormData,Object.keys(a).forEach((function(e){return s.append(e,a[e])})),s.append("file",e),r.next=11,C()({method:"post",url:o,data:s,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var r=Math.round(100*e.loaded/e.total);t.$emit("progress",r)}});case 11:t.$emit("image-ready",i);case 12:case"end":return r.stop()}}),r)})))()},getCanvas:function(){var e=this.$refs.video;if(!this.ctx){var t=document.createElement("canvas");t.height=e.videoHeight,t.width=e.videoWidth,this.canvas=t,this.ctx=t.getContext("2d")}var r=this.ctx,n=this.canvas;return r.drawImage(e,0,0,n.width,n.height),n}}},M=I,P=(r("6154"),Object(i["a"])(M,v,g,!1,null,"0ab96719",null)),k=P.exports;function x(e){e.component("vue-web-cam",k)}"undefined"!==typeof window&&window.Vue&&window.Vue.use(x);var F={name:"example",props:{msg:String},components:{WebCam:k},data:function(){return{notSupport:!1,initCamera:!1,img:null,camera:null,deviceId:null,devices:[]}},mounted:function(){this.initCamera=!0},computed:{device:function(){var e=this;return this.devices.find((function(t){return t.deviceId===e.deviceId}))}},watch:{camera:function(e){this.deviceId=e},devices:function(){var e=Object(h["a"])(this.devices),t=e[0];e.slice(1);t&&(this.camera=t.deviceId,this.deviceId=t.deviceId)}},methods:{onPreviewImage:function(e){this.img=e},onImageProgress:function(e){console.log(e)},onImageReady:function(e){console.log(e)},Capture:function(){this.$refs.webcam.capture()},onStarted:function(e){console.log("On Started Event",e)},onStopped:function(e){console.log("On Stopped Event",e)},Stop:function(){this.$refs.webcam.stop()},Start:function(){this.$refs.webcam.start()},onError:function(e){this.notSupport=!0,console.log("On Error Event",e)},onCameras:function(e){this.devices=e},onCameraChange:function(e){this.deviceId=e,this.camera=e}}},L=F,D=(r("94e0"),Object(i["a"])(L,p,m,!1,null,"6f51bf56",null)),R=D.exports,T={name:"home",components:{HelloWorld:R}},N=T,U=Object(i["a"])(N,l,f,!1,null,null,null),B=U.exports;n["a"].use(d["a"]);var W=[{path:"/",name:"home",component:B},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],V=new d["a"]({mode:"history",base:"/",routes:W}),q=V,H=r("2f62");n["a"].use(H["a"]);var A=new H["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:q,store:A,render:function(e){return e(u)}}).$mount("#app")},6154:function(e,t,r){"use strict";var n=r("967b"),a=r.n(n);a.a},"85ec":function(e,t,r){},"94e0":function(e,t,r){"use strict";var n=r("dd87"),a=r.n(n);a.a},"967b":function(e,t,r){},dd87:function(e,t,r){}});
//# sourceMappingURL=app.77da1dc6.js.map